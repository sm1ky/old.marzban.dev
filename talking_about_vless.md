---
order: 1003
label: Поговорим о VLESS
icon: mortar-board
---
{% hint style="warning" %}
Статья находится в режиме написания. Со временем будет дополняться и изменяться. 
{% endhint %}
## Определение
**VLESS** - это легкий транспортный протокол, без сохранения состояния, который разделен на входящую и исходящую части и может использоваться в качестве моста между клиентом и сервером Xray.

В отличие от VMess, VLESS не зависит от системного времени.

Метод аутентификации основан на UUID

## Запрос и ответ
**VLESS** имеет следующую структуру запроса

|  1 байт           | 16 байт        | 1 байт                          | M байт                         | 1 байт      | 2 байта | 1 байт       | S байт | X байт      |
| ---------------- | --------------- | ------------------------------- | ------------------------------- | ----------- | ------- | ------------ | ------- | ------------ |
| Версия протокола | Соответствующий UUID | Длина дополнительной информации M | Дополнительная информация в ProtoBuf | Инструкции | Порт    | Тип адреса | Адресс | Запрос |

**VLESS** имеет следующую структуру ответа

| 1 байт                                        | 1 байт                             | N байт                            | Y байт       |
| --------------------------------------------- | ---------------------------------- | ---------------------------------- | ------------- |
| Версия протокола, соответствующая запросу | Длина дополнительной информации N | Дополнительная информация в ProtoBuf | Ответ |
##  Режим передачи
**VLESS** поддерживает множество режимов передачи: TCP, gPRC, H2, quic, WebSocket, mKCP.
Но так как XTLS, о котором мы поговорим немногим позже, в настоящее время поддерживает только TCP, то для нас,TCP, является единственно рекомендуемым, в настоящее время, режимом передачи
## Cтруктура файла конфигурации
## 
## 
## 


Кроме того, XTLS в настоящее время поддерживает только три метода передачи: TCP, mKCP и DomainSocket.
В настоящее время у VLESS нет встроенного шифрования, поэтому его необходимо использовать совместно с TLS.

## REALITY

REALITY – это реализация протокола на стороне сервера, разработанного для замены TLS и удаления обнаружимого "отпечатка" TLS на стороне сервера при сохранении ключевых функций безопасности, таких как forward secrecy. 

Давайте подробно рассмотрим его основные аспекты:

1. **Указание на существующие веб-сайты:** REALITY устраняет необходимость в покупке доменных имен и настройке сервера TLS. Вместо этого он указывает на другие веб-сайты, что упрощает развертывание прокси-сервиса.

2. ** полный, настоящий TLS:** REALITY достигает полного,  настоящего TLS, который неотличим от обычного SNI (Server Name Indication) для посредника. Это означает, что посредник не может отличить трафик REALITY от обычного трафика TLS.

3. **Защита от атак на цепочку сертификатов:** REALITY предотвращает атаки на цепочку сертификатов, используя временный доверенный сертификат, выданный временным ключом аутентификации. Это гарантирует, что клиент получает только настоящий сертификат целевого веб-сайта в конкретных случаях.

**Как работает REALITY:**

1. **Инициация соединения клиентом:** Клиент отправляет сообщение Client Hello серверу REALITY с указанием желаемого SNI (Server Name Indication), открытым ключом и коротким идентификатором.

2. **Проверка клиента сервером:** REALITY проверяет открытый ключ клиента и короткий идентификатор. В случае успеха сервер отправляет сообщение Server Hello.

3. **Получение временного сертификата клиентом:** Сообщение Server Hello содержит временный доверенный сертификат, который клиент использует для проверки подлинности сервера и установки безопасного соединения.

4. **Вход клиента в режим краулера (по желанию):** Если клиент получает реальный сертификат целевого веб-сайта, он входит в режим краулера. В этом режиме клиент анализирует конфигурацию TLS веб-сайта для улучшения протокола REALITY в будущем.

5. **Получение недействительного сертификата клиентом:** В случае получения недействительного сертификата клиент отправляет предупреждение TLS и отключает соединение.

**Преимущества REALITY:**

1. **Устранение обнаружимого отпечатка TLS:** REALITY затрудняет обнаружение и блокировку трафика прокси брандмауэрами и другими промежуточными устройствами.

2. **Повышенная безопасность:** REALITY защищает от атак на цепочку сертификатов и обеспечивает forward secrecy.

3. **Более удобное развертывание:** REALITY избавляет от необходимости приобретения доменных имен и настройки сервера TLS.

**Некоторые ограничения REALITY:**

1. **Требования к  целевым веб-сайтам:** REALITY может работать только с веб-сайтами, поддерживающими TLSv1.3 и H2.

2. **Обнаружение режима краулера:** Некоторые промежуточные устройства могут обнаружить режим краулера REALITY, что может привести к блокировке соединения.
